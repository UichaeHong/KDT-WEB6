<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1>axios get 실습</h1>
    <form action="/getForm" name="test" method="get">
      이름<input type="text" name="name" required />
      <fieldset>
        <input type="radio" name="gender" value="남자" />남자
        <input type="radio" name="gender" value="여자" />여자
      </fieldset>
      <fieldset>
        <legend>생년월일</legend>
        <!-- <input type="date" name="day" /> -->
        <select name="birthYear" id="year">
          <% for (let i = 0; i < 50; i++) { %>
          <option value="<%= 2010 - i %>"><%= 2010 - i %></option>
          <% } %>
        </select>
        <label for="year">년</label>
        <select name="birthMonth" id="month">
          <% for (let i = 1; i < 13; i++) { %>
          <option value="<%= i %>"><%= i %></option>
          <% } %>
        </select>
        <label for="month">월</label>
        <select name="birthDay" id="day">
          <% for (let i = 1; i < 31; i++) { %>
          <option value="<%= i %>"><%= i %></option>
          <% } %>
        </select>
        <label for="day">일</label>
      </fieldset>

      <fieldset>
        <legend>관심사</legend>
        <input type="checkbox" name="text1" value="여행" /> 여행
        <input type="checkbox" name="text1" value="패션" /> 패션
        <input type="checkbox" name="text1" value="음식" /> 음식
      </fieldset>
      <button type="button" onclick="axiosGet();">회원가입</button>
    </form>
    <div class="result"></div>
    <script>
      const resultBox = document.querySelector(".result");
      // axios get 요청 보내기
      function axiosGet() {
        console.log("click axiosGet btn");
        const form = document.forms["test"];

        // 서버에 전송할 폼 입력값을 저장하는 객체
        const formInfo = {
          name: form.name.value,
          //   gender: form.gender.value,
          //   day: form.day,
          //   text1: form.text1.value,
        };

        axios({
          url: "/axios",
          method: "GET",
          params: formInfo, // get 요청은 params에 저장
        })
          .then(function (reponse) {
            console.log(reponse);
            console.log(reponse.data);

            resultBox.textContent = `${reponse.data.name}님 회원가입을 완료했습니다`;
            resultBox.style.color = "green";
          })
          .catch(function (error) {
            console.log("error", error);
          });
      }
    </script>
  </body>
</html>
